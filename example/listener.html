<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Sep 10, 2012
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20120910" />
    <meta http-equiv="Content-Language" content="en" />
    <title></title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".././" id="bannerLeft">
                                                                                                <img src="../images/logos/pi4j-header-small3.png"  alt="Pi4J"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.raspberrypi.org/" id="bannerRight">
                                                                                                <img src="../images/logos/trademarks.png"  alt="Pi4J"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2012-09-10</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.0.1-SNAPSHOT</li>
                      
                
            
      
                                              
    <li class="pull-right">              <a href="http://www.savagehomeautomation.com/" class="externalLink" target="_blank" title="Blog">
        Blog</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="https://github.com/Pi4J/pi4j/wiki/" class="externalLink" target="pi4j-github" title="Wiki">
        Wiki</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="https://github.com/Pi4J/pi4j/issues/" class="externalLink" target="pi4j-github" title="Issues">
        Issues</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="https://github.com/Pi4J/pi4j/" class="externalLink" target="pi4j-github" title="Github">
        Github</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href=".././" title="Home">
        Home</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                <ul class="nav nav-list">
                    <li class="nav-header">Pi4J</li>
                                
      <li>
    
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li>
    
                          <a href="../faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                  
      <li>
    
                          <a href="../dependencies.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
                  
      <li>
    
                          <a href="../release-notes.html" title="Release Notes">
          <i class="none"></i>
        Release Notes</a>
            </li>
                  
      <li>
    
                          <a href="../download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                  
      <li>
    
                          <a href="../install.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../usage.html" title="Usage">
          <i class="none"></i>
        Usage</a>
            </li>
                  
      <li>
    
                          <a href="../apidocs/index.html" title="JavaDoc">
          <i class="none"></i>
        JavaDoc</a>
            </li>
                              <li class="nav-header">Examples</li>
                                
      <li>
    
                          <a href="../example/control.html" title="Control GPIO">
          <i class="none"></i>
        Control GPIO</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Listen for GPIO Events</a>
          </li>
                  
      <li>
    
                          <a href="../example/trigger.html" title="Trigger GPIO on Events">
          <i class="none"></i>
        Trigger GPIO on Events</a>
            </li>
                  
      <li>
    
                          <a href="../example/serial.html" title="Serial Communication">
          <i class="none"></i>
        Serial Communication</a>
            </li>
                  
      <li>
    
                          <a href="../example/system-info.html" title="System/Network Information">
          <i class="none"></i>
        System/Network Information</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                    
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
            
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="http://www.raspberrypi.org/" title="RaspberryPi" class="builtBy">
        <img class="builtBy"  alt="RaspberryPi" src="../images/logos/raspberrypi.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section"><h2>GPIO State Listener Example using Pi4J.<a name="GPIO_State_Listener_Example_using_Pi4J."></a></h2><p>The following example demonstrates how to setup a listener for GPIO pin state changes on the Raspberry Pi. This listener implementation is far more efficient than constantly polling and querying for the the GPIO pin state. The listener implementation is based on GPIO hardware interrupts not state polling.</p><div class="section"><h3>Source Code <a name="Source_Code"></a></h3><p>The source code for this example is included in the github repository: <a class="externalLink" href="https://github.com/Pi4J/pi4j/tree/master/src/test/java/com/pi4j/example">https://github.com/Pi4J/pi4j/tree/master/src/test/java/com/pi4j/example</a></p><div class="source"><pre class="prettyprint">package com.pi4j.example;

import com.pi4j.io.gpio.Gpio;
import com.pi4j.io.gpio.GpioFactory;
import com.pi4j.io.gpio.GpioPin;
import com.pi4j.io.gpio.GpioPinDirection;
import com.pi4j.io.gpio.GpioPinEdge;
import com.pi4j.io.gpio.GpioPinResistor;
import com.pi4j.io.gpio.event.GpioListener;
import com.pi4j.io.gpio.event.GpioPinStateChangeEvent;

/**
 * This example code demonstrates how to setup a listener
 * for GPIO pin state changes on the Raspberry Pi.  
 * 
 * @author Robert Savage
 */
public class ListenGpioExample
{
    public static void main(String args[]) throws InterruptedException
    {
        // create gpio listener &amp; callback handler
        GpioExampleListener listener = new GpioExampleListener();

        // create gpio controller
        Gpio gpio = GpioFactory.createInstance();

        // add gpio listener
        gpio.addListener(listener);

        // setup gpio pin #4 as an input pin with its internal pull down resistor enabled
        // (configure pin edge to both rising and falling to get notified for HIGH and LOW state changes)
        gpio.setup(GpioPin.GPIO_04, GpioPinDirection.IN, GpioPinEdge.BOTH,
                   GpioPinResistor.PULL_DOWN);

        // keep program running until user aborts (CTRL-C)
        for (;;)
        {
            Thread.sleep(500);
        }
    }
}

/**
 * This class implements the GPIO listener interface
 * with the callback method for event notifications
 * when GPIO pin states change.
 * 
 * @see GpioListener
 * @author Robert Savage
 */
class GpioExampleListener implements GpioListener
{
    public void pinStateChanged(GpioPinStateChangeEvent event)
    {
        System.out.println(&quot; --&gt; GPIO PIN STATE CHANGE: &quot; + event.getPin() + &quot; = &quot;
                + event.getState());
    }
}
</pre></div></div><div class="section"><h3>Wiring Diagram<a name="Wiring_Diagram"></a></h3><p>The following circuit can be used in conjunction with this sample code.</p><img src="../images/gpio-listener-example.png" alt="" /></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2012
                        <a href="http://www.pi4j.com">Pi4J</a>.
            All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
